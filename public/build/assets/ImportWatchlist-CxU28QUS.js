import{d as x,r,c as i,a as u,b as t,x as b,g as m,t as d,f as h,T as y}from"./app-GJEGnn89.js";const _={class:"max-w-3xl mx-auto sm:px-6 lg:px-8 mt-10"},w={class:"bg-white shadow sm:rounded-lg p-6"},k={class:"flex items-center"},C={class:"cursor-pointer inline-flex items-center px-4 py-2 bg-gray-100 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-200"},M={key:0,class:"ml-3 text-sm text-gray-600 truncate"},S=["disabled"],V={key:0,class:"text-green-600 text-sm"},B={key:1,class:"text-red-600 text-sm"},N=x({__name:"ImportWatchlist",setup(D){const s=r(null),l=r(!1),o=r(""),n=r(""),f=a=>{const e=a.target;e.files&&e.files.length>0&&(s.value=e.files[0])},g=async()=>{var e,p,v;if(!s.value)return;l.value=!0,o.value="",n.value="";const a=new FormData;a.append("csv_file",s.value);try{await h.post(y("watchlist.import"),a),o.value="Імпорт завершено успішно.",s.value=null}catch(c){n.value=((p=(e=c.response)==null?void 0:e.data)==null?void 0:p.message)||"Сталася помилка під час імпорту.",console.error(((v=c.response)==null?void 0:v.data)||c)}finally{l.value=!1}};return(a,e)=>(u(),i("div",_,[t("div",w,[e[3]||(e[3]=t("h2",{class:"text-2xl font-semibold text-gray-800 mb-6"},"Імпорт Watchlist з CSV",-1)),t("form",{onSubmit:b(g,["prevent"]),enctype:"multipart/form-data",class:"space-y-4"},[t("div",null,[e[2]||(e[2]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"csv_file"}," Виберіть CSV-файл ",-1)),t("div",k,[t("label",C,[e[0]||(e[0]=t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v16h16V4H4zm4 8h8M8 12l4-4 4 4"})],-1)),e[1]||(e[1]=t("span",null,"Обрати файл",-1)),t("input",{id:"csv_file",type:"file",accept:".csv",name:"csv_file",class:"hidden",required:"",onChange:f},null,32)]),s.value?(u(),i("span",M,d(s.value.name),1)):m("",!0)])]),t("div",null,[t("button",{type:"submit",disabled:l.value,class:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-sm text-white hover:bg-blue-700 focus:outline-none focus:ring focus:ring-blue-300 disabled:opacity-50"},d(l.value?"Імпортується...":"Імпортувати"),9,S)]),o.value?(u(),i("div",V,d(o.value),1)):m("",!0),n.value?(u(),i("div",B,d(n.value),1)):m("",!0)],32)])]))}});export{N as default};
